{"version":3,"sources":["components/CustomLoader/CustomLoader.js","components/Searchbar/Searchbar.js","components/ImageGallery/ImageGallery.js","components/ImageGalleryItem/ImageGalleryItem.js","components/Button/Button.js","components/Modal/Modal.js","utils/pixabayApi/pixabayApI.js","components/App/App.js","index.js"],"names":["CustomLoader","type","color","height","width","className","Searchbar","state","searchInput","onChange","event","target","name","value","setState","formReset","onSubmit","preventDefault","searchFormSubmit","props","this","autoComplete","autoFocus","placeholder","Component","ImageGallery","children","ImageGalleryItem","id","src","alt","onClick","data-id","data-name","defaultProps","Button","Modal","image","largeImageURL","tags","API_KEY","BASE_URL","pixabayApiRequest","userQuery","page","per_page","image_type","orientation","axios","defaults","baseURL","request","then","response","status","console","log","data","statusText","headers","config","App","images","isLoading","isModalShow","fetchError","scrollToButton","window","scrollTo","top","document","documentElement","scrollHeight","behavior","a","hits","catch","error","messages","finally","onLoadMore","toggleModal","dataset","find","Number","parseInt","closeModal","code","prevProps","prevState","length","addEventListener","removeEventListener","map","webformatURL","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.96a198bb.chunk.js","sourcesContent":["import React from 'react';\r\nimport Loader from 'react-loader-spinner';\r\nimport './CustomLoader.css'\r\n\r\nfunction CustomLoader() {\r\n  return (\r\n    <Loader type=\"ThreeDots\" color=\"#00BFFF\" height={100} width={100} className=\"Loader\" />\r\n  )\r\n}\r\n\r\nexport default CustomLoader","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport './Searchbar.css'\r\n\r\nclass Searchbar extends Component {\r\n  state = {\r\n    searchInput: '',\r\n  };\r\n\r\n  onChange = event => {\r\n    const { name, value } = event.target;\r\n    this.setState({ [name]: value });\r\n  };\r\n\r\n  formReset = () => {\r\n    this.setState({ searchInput: '' })\r\n  }\r\n\r\n  onSubmit = event => {\r\n    event.preventDefault();\r\n    const { searchFormSubmit } = this.props;\r\n    const { searchInput } = this.state;\r\n    searchFormSubmit(searchInput);\r\n    this.formReset();\r\n  };\r\n\r\n  render() {\r\n\r\n    const { searchInput } = this.state;\r\n    return (\r\n      <header className=\"Searchbar\">\r\n        <form className=\"SearchForm\" onSubmit={this.onSubmit}>\r\n          <button type=\"submit\" className=\"SearchForm-button\">\r\n            <span className=\"SearchForm-button-label\">Search</span>\r\n          </button>\r\n\r\n          <input\r\n            name=\"searchInput\"\r\n            value={searchInput}\r\n            onChange={this.onChange}\r\n            className=\"SearchForm-input\"\r\n            type=\"text\"\r\n            autoComplete=\"off\"\r\n            autoFocus\r\n            placeholder=\"Search images and photos\"\r\n          />\r\n        </form>\r\n      </header>\r\n    );\r\n  }\r\n}\r\n\r\nSearchbar.propTypes = {\r\n  searchFormSubmit: PropTypes.func.isRequired\r\n}\r\n\r\nexport default Searchbar;\r\n","import React from 'react';\r\nimport './ImageGallery.css'\r\n\r\nfunction ImageGallery({ children }) {\r\n  return (\r\n    <ul className=\"ImageGallery\">\r\n      {children}\r\n    </ul>\r\n  )\r\n}\r\n\r\nexport default ImageGallery;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport './ImageGalleryItem.css'\r\n\r\nfunction ImageGalleryItem({ id, src, alt, onClick }) {\r\n\r\n  return (\r\n    <li className=\"ImageGalleryItem\" key={id} >\r\n      <img src={src} alt={alt} onClick={onClick} className=\"ImageGalleryItem-image\" data-id={id} data-name='image' />\r\n    </li>\r\n  );\r\n}\r\nImageGalleryItem.defaultProps = {\r\n  alt: 'photo'\r\n}\r\n\r\n\r\nImageGalleryItem.propTypes = {\r\n  id: PropTypes.number.isRequired,\r\n  src: PropTypes.string.isRequired,\r\n  alt: PropTypes.string,\r\n  onClick: PropTypes.func.isRequired\r\n}\r\n\r\nexport default ImageGalleryItem;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport './Button.css'\r\n\r\nfunction Button({ onClick }) {\r\n  return (\r\n    <button className=\"Button\" type=\"button\" onClick={onClick}>\r\n      Load more\r\n    </button>\r\n  );\r\n}\r\n\r\nButton.propTypes = {\r\n  onClick: PropTypes.func.isRequired\r\n}\r\n\r\nexport default Button;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport './Modal.css'\r\n\r\nfunction Modal({ image, onClick }) {\r\n\r\n  return (\r\n    <div className=\"Overlay\" onClick={onClick} data-name='overlay'>\r\n      <div className=\"Modal\">\r\n        <img src={image.largeImageURL} alt={image.tags} />\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nModal.defaultProps = {\r\n  image: {\r\n    alt: 'photo'\r\n  }\r\n}\r\n\r\nModal.propTypes = {\r\n  image: PropTypes.shape({\r\n    largeImageURL: PropTypes.string.isRequired,\r\n    alt: PropTypes.string\r\n  }),\r\n  onClick: PropTypes.func.isRequired\r\n}\r\n\r\nexport default Modal;","import axios from 'axios';\r\n\r\n//  ключ Никиты, с его ключем прилетают уникальные ответы, очень странно...\r\n// const API_KEY = \"3616495-8ef67a89dfdb2c2d531583fa2\";\r\n\r\nconst API_KEY = '18376090-d7378f6abd5315284a04e80ad';\r\nconst BASE_URL = 'https://pixabay.com/api';\r\n\r\nfunction pixabayApiRequest(userQuery = '', page = 1, per_page = 12, image_type = 'photo', orientation = 'horizontal') {\r\n  axios.defaults.baseURL = BASE_URL;\r\n\r\n  const request = `/?key=${API_KEY}&q=${userQuery}&page=${page}&per_page=${per_page}&image_type=${image_type}&orientation=${orientation}`;\r\n\r\n  return axios(request)\r\n    .then(response => {\r\n      if (response.status !== 200) {\r\n        console.log('response', response);\r\n        console.log('response.data', response.data);\r\n        console.log('response.status', response.status);\r\n        console.log('response.statusText', response.statusText);\r\n        console.log('response.headers', response.headers);\r\n        console.log('response.config', response.config);\r\n      }\r\n\r\n      return response;\r\n    })\r\n}\r\n\r\nexport default pixabayApiRequest;\r\n","import React, { Component } from 'react';\r\nimport './App.css'\r\nimport CustomLoader from '../CustomLoader/CustomLoader';\r\nimport Searchbar from '../Searchbar/Searchbar';\r\nimport ImageGallery from '../ImageGallery/ImageGallery';\r\nimport ImageGalleryItem from '../ImageGalleryItem/ImageGalleryItem';\r\nimport Button from '../Button/Button';\r\nimport Modal from '../Modal/Modal';\r\nimport pixabayApiRequest from '../../utils/pixabayApi/pixabayApI';\r\n\r\nclass App extends Component {\r\n  state = {\r\n    userQuery: '',\r\n    images: [],\r\n    page: 1,\r\n    isLoading: false,\r\n    isModalShow: false,\r\n    image: {},\r\n    fetchError: null,\r\n  };\r\n\r\n  componentDidMount() {\r\n    const { userQuery } = this.state;\r\n    this.request(userQuery);\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    const { userQuery, page, images, isModalShow } = this.state;\r\n\r\n    if (prevState.userQuery !== userQuery || page !== prevState.page) this.request();\r\n\r\n    if (images.length !== prevState.images.length) this.scrollToButton();\r\n\r\n    isModalShow && window.addEventListener('keydown', this.closeModal);\r\n    prevState.isModalShow && window.removeEventListener('keydown', this.closeModal);\r\n  }\r\n\r\n  searchFormSubmit = searchInput => {\r\n    this.setState({ userQuery: searchInput, page: 1, images: [] });\r\n  };\r\n\r\n  scrollToButton = () => {\r\n    window.scrollTo({\r\n      top: document.documentElement.scrollHeight,\r\n      behavior: 'smooth',\r\n    });\r\n  };\r\n\r\n  request = async () => {\r\n    const { userQuery, page } = this.state;\r\n\r\n    await this.setState({ isLoading: true });\r\n\r\n    pixabayApiRequest(userQuery, page)\r\n      .then(({ data }) =>\r\n        this.setState(({ images }) => {\r\n          return { images: [...images, ...data.hits] };\r\n        }),\r\n      )\r\n      .then(this.setState({ fetchError: null }))\r\n      .catch(error => this.setState({ fetchError: error.messages }))\r\n      .finally(this.setState({ isLoading: false }));\r\n  };\r\n\r\n  onLoadMore = () => {\r\n    this.setState(({ page }) => {\r\n      return { page: page + 1 };\r\n    });\r\n  };\r\n\r\n  toggleModal = event => {\r\n    const { name, id } = event.target.dataset;\r\n    const { images } = this.state;\r\n\r\n    const image = images.find(image => Number.parseInt(id) === image.id);\r\n\r\n    this.setState(({ isModalShow }) => {\r\n      if (name === 'image') return { isModalShow: true, image: image };\r\n      if (name === 'overlay') return { isModalShow: false, image: {} };\r\n    });\r\n  };\r\n\r\n  closeModal = event => {\r\n    if (event.code === 'Escape') this.setState({ isModalShow: false, image: {} });\r\n  };\r\n\r\n  render() {\r\n    const { images, isLoading, isModalShow, image } = this.state;\r\n\r\n    return (\r\n      <div className=\"App\">\r\n        <Searchbar searchFormSubmit={this.searchFormSubmit} />\r\n\r\n        {images.length > 0 && (\r\n          <ImageGallery>\r\n            {images.map(({ id, webformatURL, tags }) =>\r\n              <ImageGalleryItem id={id} src={webformatURL} alt={tags} onClick={this.toggleModal} />\r\n            )}\r\n          </ImageGallery>\r\n        )}\r\n\r\n        {isLoading && <CustomLoader />}\r\n        {images.length > 0 && !isLoading && <Button onClick={this.onLoadMore} />}\r\n\r\n        {isModalShow && <Modal image={image} onClick={this.toggleModal} />}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App/App';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}